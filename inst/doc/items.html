<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Handling questionnaire items</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Handling questionnaire items</h1>



<div id="motivation" class="section level1">
<h1>Motivation</h1>
<p>R is a great tool to do data analysis and for data management tasks
that arise in the context of big data analytics. Nevertheless there is
still room for improvement in terms of the support for data management
tasks that arise in the social sciences, especially when it comes to
handling data that come from social surveys and opinion surveys. The
main reason for this is that the way that questionnaire item responses
as they are usually coded in machine-readable survey data sets do not
directly and easily translate into R’s data types for numeric and
categorical data, that is, numerical vectors and factors. As a
consequence, many social scientists exercise their everyday data
management tasks with commercial software packages such as SPSS or
Stata, but there may be social scientists who either cannot afford such
commercial software or prefer to use, out of principle, open-source
software for all steps of data management and analysis.</p>
<p>It is one of the aim of the “memisc” package to provide a bridge
between social science data sets of variables that contain coded
responses to questionnaire items, with their typical structures
involving labelled numeric response codes and numeric codes declared as
“missing values”. As an illustrative example, suppose in a pre-election
survey, respondents are asked about which party they are going to vote
for in their constituency in the framework of a first-past-the-post
electoral system. Suppose the response categories offered to the
respondents are “Conservative”, “Labour”, “Liberal Democrat”, “Other
party”.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>
A survey agency that actually conducts the interviews with a sample of
voters may, according to common practice, use the following codes to
collect the responses to the question about the vote intention:</p>
<div class="booktable">
<style>
.booktable table th {
border-top: 0 none;
border-bottom: 0 none;
background-color: unset;
}
.booktable table td {
border-top: 0 none;
border-bottom: 0 none;
background-color: unset;
}
.booktable table tr.even {
background-color: unset;
}
.booktable table tr.header {
border-top: 2px solid;
border-bottom: 1px solid;
}
.booktable table tbody tr:last-child {
border-bottom: 2px solid;
}
</style>
<table>
<thead>
<tr class="header">
<th align="left">Response category</th>
<th align="right">Code</th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Conservative</td>
<td align="right">1</td>
<td></td>
</tr>
<tr class="even">
<td align="left">Labour</td>
<td align="right">2</td>
<td></td>
</tr>
<tr class="odd">
<td align="left">Liberal Democrat</td>
<td align="right">3</td>
<td></td>
</tr>
<tr class="even">
<td align="left">Other Party</td>
<td align="right">4</td>
<td></td>
</tr>
<tr class="odd">
<td align="left">Will not vote</td>
<td align="right">9</td>
<td></td>
</tr>
<tr class="even">
<td align="left">Don’t know</td>
<td align="right">97</td>
<td>(M)</td>
</tr>
<tr class="odd">
<td align="left">Answer refused</td>
<td align="right">98</td>
<td>(M)</td>
</tr>
<tr class="even">
<td align="left">Not applicable</td>
<td align="right">99</td>
<td>(M)</td>
</tr>
</tbody>
</table>
</div>
<p>In data sets that contain the results of such coding are essentially
numeric data – with some additional information about the “value labels”
(the labels attached to the numeric values) and about the “missing
values” (those numeric values that indicate responses that one usually
does not want to include into statistical analysis). While this coding
frame for responses to survey questionnaires is far from uncommon in the
social sciences, it is not straightforward to retain this information in
<em>R</em> objects. Here there are two main alternatives, (1) one could
store the responses as a numeric vector, thereby losing the information
about the labelled values, or (2) one could store the responses as a
factor, thereby losing the information contained in the codes. Either
way, one will lose the information about the “missing values”. Of
course, one can filter out these missing values before data analysis by
replacing them with <code>NA</code>, but it would convenient to have
facilities that do that automatically.</p>
</div>
<div id="standard-attributes-of-survey-items" class="section level1">
<h1>Standard attributes of survey items</h1>
<p>The “memisc” package introduces a new data type (more correctly an
<code>S4</code> class) that allows to handle such data, that allows to
adjust labels or missing values definitions and to translate such data
as needed either into numeric vectors of factors, thereby automatically
filtering out the missing values. This data time (or <code>S4</code>
class) is, for lack of a better term, called <code>&quot;item&quot;</code>. In
general, users do not bother with the construction of such item vectors.
Usually they are generated when data sets are imported from data files
in SPSS or Stata format. This page is mainly concerned with describing
the structure of such item vectors and how they can be manipulated in
the data management step that usually precedes data analysis. It is thus
possible to do all the data management in <em>R</em> from importing the
pristine data obtained from data archives or other data providers, such
as the survey institutes to which a principal investigator has delegated
data collection. Of course, the facilities introduced by the
<code>&quot;item&quot;</code> data type also allow to create appropriate
representations of survey item responses if a principal investigator
obtains only raw numeric codes. In the following, the construction of
<code>&quot;item&quot;</code> vectors from raw numeric data is mainly used to
highlight their structure.</p>
<div id="value_labels" class="section level2">
<h2>Value labels</h2>
<p>Suppose a numeric vector of responses to the question about their
vote intention coded using the coding frame shown above looks as
follows</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>voteint</span></code></pre></div>
<pre><code>  [1]  4  3  9  2 97 99  9  9  1  1  3  3  9  3  9  1  1  9  9  3  1  9  1  9  9
 [26]  9 98 99  9  2  1  1  4  9  1  1  1 98  2  9  2  9  1  1  3  1  2  3  1  2
 [51]  9  1  9 97  9  1  9  1  9  9  1  9 97  9 97  9  4  2  9  2  9  1  9  2  4
 [76]  1  2  1  2  9  9  4  9 97  3  1  1  1  9  9  1  9  3 99  3  4  4  3  1  9
[101]  4 97  1 99  2  2 98  3  3 98  1  9 98 99  1  3  9  9  2  1  1  9  1  2  1
[126]  9  9  1  4  9  9  1  4  4  9 99  3  9  9  9  3  4  9  9  4  4  9  4  4  9
[151]  2  1  1  1  1  9  9  9  1  3  1  2 99  3  2  9  2 99  2  3  9  1  1  1  2
[176]  9  4  1 98  3 99 99  9  9  3  9  1  2  1  9  2  4 98  1  4 99  9  2  2  2</code></pre>
<p>This numeric vector is transformed into an <code>&quot;item&quot;</code> vector
by attaching labels to the codes. The <em>R</em> code to attach labels
that reflect the coding frame shown above may look like follows (if
formatted nicely):</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="co"># This is to be run *after* memisc has been loaded.</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="fu">labels</span>(voteint) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">Conservative       =</span>  <span class="dv">1</span>,</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>                     <span class="at">Labour             =</span>  <span class="dv">2</span>,</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>                     <span class="st">&quot;Liberal Democrat&quot;</span> <span class="ot">=</span>  <span class="dv">3</span>, <span class="co"># We have whitespace in the label, </span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>                     <span class="st">&quot;Other Party&quot;</span>      <span class="ot">=</span>  <span class="dv">4</span>, <span class="co"># so we need quotation marks</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>                     <span class="st">&quot;Will not vote&quot;</span>    <span class="ot">=</span>  <span class="dv">9</span>,</span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>                     <span class="st">&quot;Don&#39;t know&quot;</span>       <span class="ot">=</span> <span class="dv">97</span>,</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a>                     <span class="st">&quot;Answer refused&quot;</span>   <span class="ot">=</span> <span class="dv">98</span>,</span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a>                     <span class="st">&quot;Not applicable&quot;</span>   <span class="ot">=</span> <span class="dv">99</span>)</span></code></pre></div>
<p><code>voteint</code> is now an item vector, for which a particular
<code>&quot;show&quot;</code> method is defined:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">class</span>(voteint)</span></code></pre></div>
<pre><code>[1] &quot;double.item&quot;
attr(,&quot;package&quot;)
[1] &quot;memisc&quot;</code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">str</span>(voteint)</span></code></pre></div>
<pre><code> Nmnl. item w/ 8 labels for 1,2,3,...  num [1:200] 4 3 9 2 97 99 9 9 1 1 ...</code></pre>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>voteint</span></code></pre></div>
<pre><code>
Item (measurement: nominal, type: double, length = 200) 

 [1:200] Other Party Liberal Democrat Will not vote Labour Don&#39;t know ...</code></pre>
<p>Like with factors, if <em>R</em> shows the contents of the vector,
the labels are shown (instead of the codes). Since item vectors
typically are quite long, because they come from interviewing a survey
sample and usual survey sample sizes are about 2000, we usually do not
want to see all the values in the vector. <code>&quot;memisc&quot;</code>
anticipates this and shows at most a single line of output. (In the
output, also the “level of measurement” is shown, which at this point
does not have a consquence. It will become clear later what the
implications of the “level of measurement” are.)</p>
<p>In line with the usual semantics <code>labels(voteint)</code> will
now show us a description of the labels and to which values they are
assigned:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="fu">labels</span>(voteint)</span></code></pre></div>
<pre><code>
 Values and labels:

    1 &#39;Conservative&#39;    
    2 &#39;Labour&#39;          
    3 &#39;Liberal Democrat&#39;
    4 &#39;Other Party&#39;     
    9 &#39;Will not vote&#39;   
   97 &#39;Don&#39;t know&#39;      
   98 &#39;Answer refused&#39;  
   99 &#39;Not applicable&#39;  </code></pre>
<p>Now if we rather want shorter labels, we can change them either by
something like <code>labels(voteint) &lt;- ...</code> or by changing the
labels using <code>relabel()</code>:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>voteint <span class="ot">&lt;-</span> <span class="fu">relabel</span>(voteint,</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>                   <span class="st">&quot;Conservative&quot;</span>     <span class="ot">=</span> <span class="st">&quot;Cons&quot;</span>,</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>                   <span class="st">&quot;Labour&quot;</span>           <span class="ot">=</span> <span class="st">&quot;Lab&quot;</span>,</span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a>                   <span class="st">&quot;Liberal Democrat&quot;</span> <span class="ot">=</span> <span class="st">&quot;LibDem&quot;</span>,</span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a>                   <span class="st">&quot;Other Party&quot;</span>      <span class="ot">=</span> <span class="st">&quot;Other&quot;</span>,</span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a>                   <span class="st">&quot;Will not vote&quot;</span>    <span class="ot">=</span> <span class="st">&quot;NoVote&quot;</span>,</span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a>                   <span class="st">&quot;Don&#39;t know&quot;</span>       <span class="ot">=</span> <span class="st">&quot;DK&quot;</span>,</span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a>                   <span class="st">&quot;Answer refused&quot;</span>   <span class="ot">=</span> <span class="st">&quot;Refused&quot;</span>,</span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a>                   <span class="st">&quot;Not applicable&quot;</span>   <span class="ot">=</span> <span class="st">&quot;N.a.&quot;</span>)</span></code></pre></div>
<p>Let us take a look at the result:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="fu">labels</span>(voteint)</span></code></pre></div>
<pre><code>
 Values and labels:

    1 &#39;Cons&#39;   
    2 &#39;Lab&#39;    
    3 &#39;LibDem&#39; 
    4 &#39;Other&#39;  
    9 &#39;NoVote&#39; 
   97 &#39;DK&#39;     
   98 &#39;Refused&#39;
   99 &#39;N.a.&#39;   </code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>voteint</span></code></pre></div>
<pre><code>
Item (measurement: nominal, type: double, length = 200) 

 [1:200] Other LibDem NoVote Lab DK N.a. NoVote NoVote Cons Cons LibDem ...</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="fu">str</span>(voteint)</span></code></pre></div>
<pre><code> Nmnl. item w/ 8 labels for 1,2,3,...  num [1:200] 4 3 9 2 97 99 9 9 1 1 ...</code></pre>
</div>
<div id="missing_values" class="section level2">
<h2>Missing values</h2>
<p>In the coding plan shown above, the values 97, 98, and 99 are marked
as “missing values”, that is, while they represent coded responses, they
are not to be considered as valid in the sense of providing information
about the respondent’s vote intention. For the statistical analysis of
vote intention it is natural to replace them by <code>NA</code>. Yet
replacing codes 97, 98, and 99 already at the stage of importing data
into <em>R</em> memory would mean a loss of potentially precious
information since it precludes, e.g. the motivation to refuse responding
to the vote intention question or the antencedents of undecidedness.
Hence it is better to mark those values and to delay their replacement
by <code>NA</code> to a later stage in the analysis of vote intentions
and to be able to undo or change the “missingness” of these values. For
example, not only may one be interested in the antecedents of response
refusals but also be interested to analyse vote intention with
non-voting excluded or included. The memisc package provides, like SPSS
and PSPP, facilities to mark particular values of an item vector as
“missing” and change such designations throughout the data preperation
stage.</p>
<p>There are several ways with <code>&quot;memisc&quot;</code> to make
distinctions between valid and missing values. The first way that
mirrors the way it is done in SPSS. To illustrate this we return to the
fictitious vote intention example. The values 97,98,99 of
<code>voteint</code> are designated as “missing” by</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="fu">missing.values</span>(voteint) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">97</span>,<span class="dv">98</span>,<span class="dv">99</span>)</span></code></pre></div>
<p>The missing values are reflected in the output of
<code>voteint</code>, (labels of) missing values are marked with
<code>*</code> in the output:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a>voteint</span></code></pre></div>
<pre><code>
Item (measurement: nominal, type: double, length = 200) 

 [1:200] Other LibDem NoVote Lab *DK *N.a. NoVote NoVote Cons Cons LibDem ...</code></pre>
<p>It is also possible to extend the set of missing values: We add
another value to the set of missing values.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="fu">missing.values</span>(voteint) <span class="ot">&lt;-</span> <span class="fu">missing.values</span>(voteint) <span class="sc">+</span> <span class="dv">9</span></span></code></pre></div>
<p>The missing values can be recalled as usual:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="fu">missing.values</span>(voteint)</span></code></pre></div>
<pre><code>97, 98, 99, 9</code></pre>
<p>The missing values are turned into <code>NA</code> if
<code>voteint</code> is coerced into a numeric vector or a factor, which
is what usually happens before the eventual statistical analysis:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="fu">as.numeric</span>(voteint)[<span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>]</span></code></pre></div>
<pre><code> [1]  4  3 NA  2 NA NA NA NA  1  1  3  3 NA  3 NA  1  1 NA NA  3  1 NA  1 NA NA
[26] NA NA NA NA  2</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="fu">as.factor</span>(voteint)[<span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>]</span></code></pre></div>
<pre><code> [1] Other  LibDem &lt;NA&gt;   Lab    &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   Cons   Cons  
[11] LibDem LibDem &lt;NA&gt;   LibDem &lt;NA&gt;   Cons   Cons   &lt;NA&gt;   &lt;NA&gt;   LibDem
[21] Cons   &lt;NA&gt;   Cons   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   Lab   
Levels: Cons Lab LibDem Other</code></pre>
<p>It is also possible to drop all missing value designations:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="fu">missing.values</span>(voteint) <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a><span class="fu">missing.values</span>(voteint)</span></code></pre></div>
<pre><code>NULL</code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="fu">as.numeric</span>(voteint)[<span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>]</span></code></pre></div>
<pre><code> [1]  4  3  9  2 97 99  9  9  1  1  3  3  9  3  9  1  1  9  9  3  1  9  1  9  9
[26]  9 98 99  9  2</code></pre>
<p>In contrast to SPSS it is possible with <code>&quot;memisc&quot;</code> to
designate the valid, i.e. non-missing values:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="fu">valid.values</span>(voteint) <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span></span>
<span id="cb33-2"><a href="#cb33-2" tabindex="-1"></a><span class="fu">valid.values</span>(voteint)</span></code></pre></div>
<pre><code>1, 2, 3, 4</code></pre>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a><span class="fu">missing.values</span>(voteint)</span></code></pre></div>
<pre><code>9, 97, 98, 99</code></pre>
<p>Instead of individual valid or missing values it is also possible to
define a <em>range</em> of values as valid:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a><span class="fu">valid.range</span>(voteint) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">9</span>)</span>
<span id="cb37-2"><a href="#cb37-2" tabindex="-1"></a><span class="fu">missing.values</span>(voteint)</span></code></pre></div>
<pre><code>97, 98, 99</code></pre>
</div>
<div id="annotations" class="section level2">
<h2>Other attributes of survey items</h2>
<p>Other software packages targeted at social scientists also allow to
add annotations to the variables in a data set, which are not subject to
the syntactic constraints of variable names. These annotations are
usually called “variable labels” in these software packages. In
<code>&quot;memisc&quot;</code> the corresponding term is “description”. In
continuation of the running example, we add a description to the vote
intention variable:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="fu">description</span>(voteint) <span class="ot">&lt;-</span> <span class="st">&quot;Vote intention&quot;</span></span>
<span id="cb39-2"><a href="#cb39-2" tabindex="-1"></a><span class="fu">description</span>(voteint)</span></code></pre></div>
<pre><code>[1] &quot;Vote intention&quot;</code></pre>
<p>In contrast to other software, <code>&quot;memisc&quot;</code> allows to attach
arbitrarily annotation to survey items, such as the wording of a survey
question:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a><span class="fu">wording</span>(voteint) <span class="ot">&lt;-</span> <span class="st">&quot;Which party are you going to vote for in the general election next Tuesday?&quot;</span></span>
<span id="cb41-2"><a href="#cb41-2" tabindex="-1"></a><span class="fu">wording</span>(voteint)</span></code></pre></div>
<pre><code>[1] &quot;Which party are you going to vote for in the general election next Tuesday?&quot;</code></pre>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a><span class="fu">annotation</span>(voteint)</span></code></pre></div>
<pre><code>description:
     Vote intention

wording:
     Which party are you going to vote for in the general election next
     Tuesday?</code></pre>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" tabindex="-1"></a><span class="fu">annotation</span>(voteint)[<span class="st">&quot;wording&quot;</span>]</span></code></pre></div>
<pre><code>                                                                      wording 
&quot;Which party are you going to vote for in the general election next Tuesday?&quot; </code></pre>
</div>
<div id="codebooks-of-survey-items" class="section level2">
<h2>Codebooks of survey items</h2>
<p>It is common in survey research to describe a data set in the form of
a <em>codebook</em>. A codebook summarises each variable in the data set
in terms of its relevant attributes, that is, the label attached to the
variable (in the context of the <code>memisc</code> package this is
called its “description”), the labels attached to the values of the
variable, which values of the variable are supposed to be
<em>missing</em> or <em>valid</em>, as well as univariate summary
statistics of each variable, usually without and with missing variables
included. Such functionality is provided in this package by the function
<code>codebook()</code>. <code>codebook()</code> when applied to an
<code>&quot;item&quot;</code> object returns a <code>&quot;codebook&quot;</code> object,
which when printed to the console gives an overview of the variable
usually required for the codebook of a data set (the production of
codebooks for whole data sets is described further below). To illustrate
the <code>codebook()</code> function we now produce a codebook of the
<code>voteint</code> item variable created above:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" tabindex="-1"></a><span class="fu">codebook</span>(voteint)</span></code></pre></div>
<pre><code>================================================================================

   voteint &#39;Vote intention&#39;

   &quot;Which party are you going to vote for in the general election next
   Tuesday?&quot;

--------------------------------------------------------------------------------

   Storage mode: double
   Measurement: nominal
   Valid range: 1 - 9

   Values and labels     N Valid Total
                                      
    1   &#39;Cons&#39;          49  27.8  24.5
    2   &#39;Lab&#39;           26  14.8  13.0
    3   &#39;LibDem&#39;        21  11.9  10.5
    4   &#39;Other&#39;         19  10.8   9.5
    9   &#39;NoVote&#39;        61  34.7  30.5
   97 M &#39;DK&#39;             6         3.0
   98 M &#39;Refused&#39;        7         3.5
   99 M &#39;N.a.&#39;          11         5.5</code></pre>
<p>As can be seen in the output, the <code>codebook()</code> function
reports the name of the variable, the description (if defined for the
variable), and the question wording (again if defined). Further it
reports the storage mode (which is use by <em>R</em>), the level of
measurement (“nominal”, “ordinal”, “interval”, or “ratio”) and the range
of valid values (or alternatively, individually defined valid values,
individually defined missing values, or ranges of missing values). For
item variables with value labels, it shows a table of frequencies of the
labelled values, and the percentages of valid values and all values with
missings included.</p>
<p>Codebooks are particularly useful to find “wild codes”, that is codes
that are not labelled, and usually produced by coding errors. Such
coding errors may be less common in data sets produced by CAPI or CATI
or online surveys, but they may occur in older data sets from before the
age of computer-assisted interviewing and also during the course of data
management. This use of codebooks is demonstrated in the following by
deliberatly adding some coding errors into a copy of our
<code>voteint</code> variable:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" tabindex="-1"></a>voteint1 <span class="ot">&lt;-</span> voteint</span>
<span id="cb49-2"><a href="#cb49-2" tabindex="-1"></a>voteint1[<span class="fu">sample</span>(<span class="fu">length</span>(voteint),<span class="at">size=</span><span class="dv">20</span>)] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="dv">5</span>,<span class="dv">13</span>),<span class="fu">rep</span>(<span class="dv">7</span>,<span class="dv">7</span>))</span></code></pre></div>
<p>The presence of these “wild codes” can now be spotted using
<code>codebook()</code>:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" tabindex="-1"></a><span class="fu">codebook</span>(voteint1)</span></code></pre></div>
<pre><code>================================================================================

   voteint1 &#39;Vote intention&#39;

   &quot;Which party are you going to vote for in the general election next
   Tuesday?&quot;

--------------------------------------------------------------------------------

   Storage mode: double
   Measurement: nominal
   Valid range: 1 - 9

   Values and labels     N Valid Total
                                      
    1   &#39;Cons&#39;          44  25.0  22.0
    2   &#39;Lab&#39;           24  13.6  12.0
    3   &#39;LibDem&#39;        16   9.1   8.0
    4   &#39;Other&#39;         17   9.7   8.5
    9   &#39;NoVote&#39;        55  31.2  27.5
   97 M &#39;DK&#39;             6         3.0
   98 M &#39;Refused&#39;        7         3.5
   99 M &#39;N.a.&#39;          11         5.5
        (unlab.val.)    20  11.4  10.0</code></pre>
<p>The output shows that 20 observations contain wild codes in this
variable. Why don’t we get a list of wild codes as part of the codebook?
The reason is that codebook is supposed also to work with continuous
variables that have thousands of unique, unlabelled values. Users
certainly will not like to see them all as part of a codebook.</p>
<p>In order to get a list of wild codes the development version of
“memisc” contains the function <code>wild.codes()</code>, which we apply
to the variable <code>voteint1</code></p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" tabindex="-1"></a><span class="fu">wild.codes</span>(voteint1)</span></code></pre></div>
<pre><code>  Counts Percent
5   13.0     6.5
7    7.0     3.5</code></pre>
<p>We see that 6.5 and 3.5 percent of the observations have the wild
codes 5 and 7.</p>
<p>To see how <code>codebook()</code> works with variables without value
labels, we create an unlabelled copy of our <code>voteint</code>
variable:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" tabindex="-1"></a>voteint2 <span class="ot">&lt;-</span> voteint</span>
<span id="cb54-2"><a href="#cb54-2" tabindex="-1"></a><span class="fu">labels</span>(voteint2) <span class="ot">&lt;-</span> <span class="cn">NULL</span> <span class="co"># This deletes all value labels</span></span>
<span id="cb54-3"><a href="#cb54-3" tabindex="-1"></a><span class="fu">codebook</span>(voteint2)</span></code></pre></div>
<pre><code>================================================================================

   voteint2 &#39;Vote intention&#39;

   &quot;Which party are you going to vote for in the general election next
   Tuesday?&quot;

--------------------------------------------------------------------------------

   Storage mode: double
   Measurement: nominal
   Valid range: 1 - 9

   Values               N Valid Total
                                     
       (unlab.val.)   176 100.0  88.0
     M (unlab.mss.)    24        12.0</code></pre>
<p>Usually, variables without labelled values represent measures on an
interval or ratio scale. In that case, we do not want to see how many
unlabelled values there are, but we want to get some other statistics,
such as mean, variance, etc. To this purpose, we decleare the variable
<code>voteint2</code> to have an interval-scale level of measurement.<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a></p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" tabindex="-1"></a><span class="fu">measurement</span>(voteint2) <span class="ot">&lt;-</span> <span class="st">&quot;interval&quot;</span></span>
<span id="cb56-2"><a href="#cb56-2" tabindex="-1"></a><span class="fu">codebook</span>(voteint2)</span></code></pre></div>
<pre><code>================================================================================

   voteint2 &#39;Vote intention&#39;

   &quot;Which party are you going to vote for in the general election next
   Tuesday?&quot;

--------------------------------------------------------------------------------

   Storage mode: double
   Measurement: interval
   Valid range: 1 - 9

   Values                 N Percent
                                   
     M (unlab.mss.)      24    12.0
                                   
        Min: 1.000                 
        Max: 9.000                 
       Mean: 4.483                 
   Std.Dev.: 3.413                 </code></pre>
<p>For convenience of including them into word-processor documents,
there is also the possibility to export codebooks into HTML:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" tabindex="-1"></a><span class="fu">show_html</span>(<span class="fu">codebook</span>(voteint))</span></code></pre></div>
<style>
.cbe-body table {
margin: unset;
}
.cbe-body table,
.cbe-body table tr,
.cbe-body table td
{
border-style: none;
padding: unset;
}
.cbe-header {
border-top: solid 2px;
border-bottom: solid 1px;
padding-left: 3ex;
}
.cbe-body {
padding-left: 3ex;
}
.cbe-table {
border-collapse: collapse;
}
.cbe-table td:nth-child(n of .header) {
text-align: center;
padding-left: .3em;
padding-right: .3em;
}
.cbe-vl-table td:nth-child(1) {
text-align: right;
padding-left: .3em;
padding-right: .3em;
}
.cbe-vl-table td:nth-child(2) {
text-align: center;
padding-left: .3em;
padding-right: .3em;
}
.cbe-vl-table td:nth-child(3) {
text-align: left;
padding-left: .3em;
padding-right: .3em;
}
.cbe-vl-table td:nth-child(4) {
text-align: right;
padding-left: .3em;
padding-right: .3em;
}
.cbe-vl-table td:nth-child(5),
.cbe-vl-table td:nth-child(8),
.cbe-vl-table td:nth-child(11),
.cbe-vl-table td:nth-child(14),
.cbe-vl-table td:nth-child(17),
.cbe-d-table td:nth-child(2),
.cbe-d-table td:nth-child(5){
text-align: right;
padding-left: .3em;
padding-right: 0px;
}
.cbe-vl-table td:nth-child(6),
.cbe-vl-table td:nth-child(9),
.cbe-vl-table td:nth-child(12),
.cbe-vl-table td:nth-child(15),
.cbe-vl-table td:nth-child(18),
.cbe-d-table td:nth-child(3),
.cbe-d-table td:nth-child(6) {
text-align: center;
padding-left: 0px;
padding-right: 0px;
width: 1px;
}
.cbe-vl-table td:nth-child(7),
.cbe-vl-table td:nth-child(10),
.cbe-vl-table td:nth-child(13),
.cbe-vl-table td:nth-child(16),
.cbe-vl-table td:nth-child(19),
.cbe-d-table td:nth-child(4),
.cbe-d-table td:nth-child(7) {
text-align: left;
padding-right: .3em;
padding-left: 0px;
}
.cbe-d-table td:nth-child(1){
text-align: left;
padding-left: .3em;
padding-right: .3em;
}
</style>
<div class="codebook">
<div class="codebook-entry">
<div class="cbe-header">
<p>
</p>
<p class="cbe-title" id="voteint">
<code class="cbe-name">voteint</code> — <span class="cbe-description">‘Vote intention’</span>
</p>
<p class="cbe-wording">
“Which party are you going to vote for in the general election next
Tuesday?”
</p>
</div>
<div class="cbe-body">
<p>
</p>
<table class="cbe-spec">
<tr>
<td>
Storage mode:
</td>
<td>
double
</td>
</tr>
<tr>
<td>
Measurement:
</td>
<td>
nominal
</td>
</tr>
<tr>
<td>
Valid range:
</td>
<td>
1 - 9
</td>
</tr>
</table>
<p>
</p>
<table class="cbe-table cbe-vl-table">
<tr>
<td colspan="3" class="header">
Values and labels
</td>
<td class="header">
N
</td>
<td colspan="3" class="header">
Valid
</td>
<td colspan="3" class="header">
Total
</td>
</tr>
<tr>
<td>
1
</td>
<td>
</td>
<td>
‘Cons’
</td>
<td>
49
</td>
<td>
27
</td>
<td>
.
</td>
<td>
8
</td>
<td>
24
</td>
<td>
.
</td>
<td>
5
</td>
</tr>
<tr>
<td>
2
</td>
<td>
</td>
<td>
‘Lab’
</td>
<td>
26
</td>
<td>
14
</td>
<td>
.
</td>
<td>
8
</td>
<td>
13
</td>
<td>
.
</td>
<td>
0
</td>
</tr>
<tr>
<td>
3
</td>
<td>
</td>
<td>
‘LibDem’
</td>
<td>
21
</td>
<td>
11
</td>
<td>
.
</td>
<td>
9
</td>
<td>
10
</td>
<td>
.
</td>
<td>
5
</td>
</tr>
<tr>
<td>
4
</td>
<td>
</td>
<td>
‘Other’
</td>
<td>
19
</td>
<td>
10
</td>
<td>
.
</td>
<td>
8
</td>
<td>
9
</td>
<td>
.
</td>
<td>
5
</td>
</tr>
<tr>
<td>
9
</td>
<td>
</td>
<td>
‘NoVote’
</td>
<td>
61
</td>
<td>
34
</td>
<td>
.
</td>
<td>
7
</td>
<td>
30
</td>
<td>
.
</td>
<td>
5
</td>
</tr>
<tr>
<td>
97
</td>
<td>
M
</td>
<td>
‘DK’
</td>
<td>
6
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
3
</td>
<td>
.
</td>
<td>
0
</td>
</tr>
<tr>
<td>
98
</td>
<td>
M
</td>
<td>
‘Refused’
</td>
<td>
7
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
3
</td>
<td>
.
</td>
<td>
5
</td>
</tr>
<tr>
<td>
99
</td>
<td>
M
</td>
<td>
‘N.a.’
</td>
<td>
11
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
5
</td>
<td>
.
</td>
<td>
5
</td>
</tr>
</table>
<p>
</p>
</div>
</div>
</div>
</div>
</div>
<div id="data-sets-containers-of-survey-items" class="section level1">
<h1>Data sets: Containers of survey items</h1>
<p>Usually one expects to be able handle data on responses to survey
items not in isolation, but as part of a data set, which contains a
multitude of observations on many variables. The usual data structure in
<em>R</em> to contain observation-on-variables data is the <em>data
frame</em>. In principle it is possible to put survey item vectors as
described above into a data frame, nevertheless the
<code>&quot;memisc&quot;</code> package provides a special data structure to
contain survey item data called data sets or data set-objects, that is,
objects of class <code>&quot;data.set&quot;</code>. This opens up the possibility
to automatically translate survey items into regular vectors and
factors, as expected by typical data analysis functions, such as
<code>lm()</code> or <code>glm()</code>.</p>
<div id="the-structure-of-data.set-objects" class="section level2">
<h2>The structure of <code>&quot;data.set&quot;</code> objects</h2>
<p>Data set objects have essentially the same row-by-column structure as
data frames: They are a set of vectors (however of class
<code>&quot;item&quot;</code>) all with the same length, so that in each row of
the data set there are values in these vectors. Observations can be
addressed as rows of a <code>&quot;data.set&quot;</code> and variabels can be
addressed as columns, just as one may used to with regards to data
frames. Most data management operations that you can do with data frames
can also be done with data sets (such as merging them or using the
functions <code>with()</code> or <code>within()</code>). Yet in contrast
to data frames, data sets are always expected to contain objects of
class <code>&quot;item&quot;</code>, and any vectors or factors from which a
<code>&quot;data.set&quot;</code> object is constructed are changed into
<code>&quot;item&quot;</code> objects.</p>
<p>Another difference is the way that <code>&quot;data.set&quot;</code> objects
are shown on the console. As <code>S4</code> objects, if a user types in
the name of a <code>&quot;data.set&quot;</code> objects, the function
<code>show()</code> (and not <code>print()</code>) is applied to it. The
<code>show()</code>-method for data set objects is defined in such a way
that only the first few observations of the first few variables are
shown on the console – in contrast to <code>print()</code> as applied to
a data frame, which shows <em>all</em> observations on <em>all</em>
variables. While it may be intuitive and convenient to be shown all
observations in a small data frame, this is not what you will want if
your data set contains more than 2000 observations on several hundred
variables, the dimensions that typical social science data sets have
that you can download from data archives such as that of ICPSR or
GESIS.</p>
<p>The main facilitites of <code>&quot;data.set&quot;</code> objects are
demonstrated in what follows. First, we create a data set with fictional
survey responses</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" tabindex="-1"></a>Data <span class="ot">&lt;-</span> <span class="fu">data.set</span>(</span>
<span id="cb59-2"><a href="#cb59-2" tabindex="-1"></a>          <span class="at">vote =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">8</span>,<span class="dv">9</span>,<span class="dv">97</span>,<span class="dv">99</span>),</span>
<span id="cb59-3"><a href="#cb59-3" tabindex="-1"></a>                        <span class="at">size=</span><span class="dv">300</span>,<span class="at">replace=</span><span class="cn">TRUE</span>),</span>
<span id="cb59-4"><a href="#cb59-4" tabindex="-1"></a>          <span class="at">region =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="fu">rep</span>(<span class="dv">1</span>,<span class="dv">3</span>),<span class="fu">rep</span>(<span class="dv">2</span>,<span class="dv">2</span>),<span class="dv">3</span>,<span class="dv">99</span>),</span>
<span id="cb59-5"><a href="#cb59-5" tabindex="-1"></a>                          <span class="at">size=</span><span class="dv">300</span>,<span class="at">replace=</span><span class="cn">TRUE</span>),</span>
<span id="cb59-6"><a href="#cb59-6" tabindex="-1"></a>          <span class="at">income =</span> <span class="fu">round</span>(<span class="fu">exp</span>(<span class="fu">rnorm</span>(<span class="dv">300</span>,<span class="at">sd=</span>.<span class="dv">7</span>))<span class="sc">*</span><span class="dv">2000</span>)</span>
<span id="cb59-7"><a href="#cb59-7" tabindex="-1"></a>          )</span></code></pre></div>
<p>Then, we take a look at this already sizeable
<code>&quot;data.set&quot;</code>” object:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" tabindex="-1"></a>Data</span></code></pre></div>
<pre><code>
Data set with 300 observations and 3 variables

   vote region income
 1    2      3   4950
 2   99     99    727
 3    2      3   1667
 4   97     99   2970
 5    1      1   2943
 6    9      2   1351
 7    1      1   1540
 8    4      1   2270
 9    3      1   2047
10    8      1   6042
11    9     99   1589
12    3     99   5126
13    1      1   1206
14    8      2   8878
15    8      1   2859
16    3      1   1038
17    2      2   1844
18    2      1   2928
19    9     99    921
20   97      1   2885
21    1      2   1453
22    4      3   1185
23    8      2   3593
24    2      3   4981
25    2      2   8243
.. .... ...... ......
(25 of 300 observations shown)</code></pre>
<p>In this case, our data set has only three variables, all of which are
shown, but of the observations we see only the first 25. Actually the
number of observations shown can be determined by the option
<code>&quot;show.max.obs&quot;</code> which defaults to 25, but can be changed as
convenient:</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" tabindex="-1"></a><span class="fu">options</span>(<span class="at">show.max.obs=</span><span class="dv">5</span>)</span>
<span id="cb62-2"><a href="#cb62-2" tabindex="-1"></a>Data</span></code></pre></div>
<pre><code>
Data set with 300 observations and 3 variables

  vote region income
1    2      3   4950
2   99     99    727
3    2      3   1667
4   97     99   2970
5    1      1   2943
. .... ...... ......
(5 of 300 observations shown)</code></pre>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" tabindex="-1"></a><span class="co"># Back to the default</span></span>
<span id="cb64-2"><a href="#cb64-2" tabindex="-1"></a><span class="fu">options</span>(<span class="at">show.max.obs=</span><span class="dv">25</span>)</span></code></pre></div>
<p>If you <em>really</em> want to see the complete data on your console,
then you can use <code>print()</code> instead:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" tabindex="-1"></a><span class="fu">print</span>(Data)</span></code></pre></div>
<p>but you should not do this with large data sets, such as the
Eurobarometer trend file …</p>
</div>
<div id="manipulating-data-in-data-sets" class="section level2">
<h2>Manipulating data in data sets</h2>
<p>Typical data management tasks that you would otherwise have done in
commercial packages like SPSS or Stata can be conducted within data set
objects. Actually to provide this possibility (to the author of the
package) was the main reason that the <code>&quot;memisc&quot;</code> package was
created. To demonstrate this, we continue with our fictional data which
we prepare for further analysis:</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" tabindex="-1"></a>Data <span class="ot">&lt;-</span> <span class="fu">within</span>(Data,{</span>
<span id="cb66-2"><a href="#cb66-2" tabindex="-1"></a>  <span class="fu">description</span>(vote) <span class="ot">&lt;-</span> <span class="st">&quot;Vote intention&quot;</span></span>
<span id="cb66-3"><a href="#cb66-3" tabindex="-1"></a>  <span class="fu">description</span>(region) <span class="ot">&lt;-</span> <span class="st">&quot;Region of residence&quot;</span></span>
<span id="cb66-4"><a href="#cb66-4" tabindex="-1"></a>  <span class="fu">description</span>(income) <span class="ot">&lt;-</span> <span class="st">&quot;Household income&quot;</span></span>
<span id="cb66-5"><a href="#cb66-5" tabindex="-1"></a>  <span class="fu">wording</span>(vote) <span class="ot">&lt;-</span> <span class="st">&quot;If a general election would take place next Tuesday,</span></span>
<span id="cb66-6"><a href="#cb66-6" tabindex="-1"></a><span class="st">                    the candidate of which party would you vote for?&quot;</span></span>
<span id="cb66-7"><a href="#cb66-7" tabindex="-1"></a>  <span class="fu">wording</span>(income) <span class="ot">&lt;-</span> <span class="st">&quot;All things taken into account, how much do all</span></span>
<span id="cb66-8"><a href="#cb66-8" tabindex="-1"></a><span class="st">                    household members earn in sum?&quot;</span></span>
<span id="cb66-9"><a href="#cb66-9" tabindex="-1"></a>  <span class="fu">foreach</span>(<span class="at">x=</span><span class="fu">c</span>(vote,region),{</span>
<span id="cb66-10"><a href="#cb66-10" tabindex="-1"></a>    <span class="fu">measurement</span>(x) <span class="ot">&lt;-</span> <span class="st">&quot;nominal&quot;</span></span>
<span id="cb66-11"><a href="#cb66-11" tabindex="-1"></a>    })</span>
<span id="cb66-12"><a href="#cb66-12" tabindex="-1"></a>  <span class="fu">measurement</span>(income) <span class="ot">&lt;-</span> <span class="st">&quot;ratio&quot;</span></span>
<span id="cb66-13"><a href="#cb66-13" tabindex="-1"></a>  <span class="fu">labels</span>(vote) <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb66-14"><a href="#cb66-14" tabindex="-1"></a>                    <span class="at">Conservatives         =</span>  <span class="dv">1</span>,</span>
<span id="cb66-15"><a href="#cb66-15" tabindex="-1"></a>                    <span class="at">Labour                =</span>  <span class="dv">2</span>,</span>
<span id="cb66-16"><a href="#cb66-16" tabindex="-1"></a>                    <span class="st">&quot;Liberal Democrats&quot;</span>   <span class="ot">=</span>  <span class="dv">3</span>,</span>
<span id="cb66-17"><a href="#cb66-17" tabindex="-1"></a>                    <span class="st">&quot;Other&quot;</span>               <span class="ot">=</span>  <span class="dv">4</span>,</span>
<span id="cb66-18"><a href="#cb66-18" tabindex="-1"></a>                    <span class="st">&quot;Don&#39;t know&quot;</span>          <span class="ot">=</span>  <span class="dv">8</span>,</span>
<span id="cb66-19"><a href="#cb66-19" tabindex="-1"></a>                    <span class="st">&quot;Answer refused&quot;</span>      <span class="ot">=</span>  <span class="dv">9</span>,</span>
<span id="cb66-20"><a href="#cb66-20" tabindex="-1"></a>                    <span class="st">&quot;Not applicable&quot;</span>      <span class="ot">=</span> <span class="dv">97</span>,</span>
<span id="cb66-21"><a href="#cb66-21" tabindex="-1"></a>                    <span class="st">&quot;Not asked in survey&quot;</span> <span class="ot">=</span> <span class="dv">99</span>)</span>
<span id="cb66-22"><a href="#cb66-22" tabindex="-1"></a>  <span class="fu">labels</span>(region) <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb66-23"><a href="#cb66-23" tabindex="-1"></a>                    <span class="at">England               =</span>  <span class="dv">1</span>,</span>
<span id="cb66-24"><a href="#cb66-24" tabindex="-1"></a>                    <span class="at">Scotland              =</span>  <span class="dv">2</span>,</span>
<span id="cb66-25"><a href="#cb66-25" tabindex="-1"></a>                    <span class="at">Wales                 =</span>  <span class="dv">3</span>,</span>
<span id="cb66-26"><a href="#cb66-26" tabindex="-1"></a>                    <span class="st">&quot;Not applicable&quot;</span>      <span class="ot">=</span> <span class="dv">97</span>,</span>
<span id="cb66-27"><a href="#cb66-27" tabindex="-1"></a>                    <span class="st">&quot;Not asked in survey&quot;</span> <span class="ot">=</span> <span class="dv">99</span>)</span>
<span id="cb66-28"><a href="#cb66-28" tabindex="-1"></a>  <span class="fu">foreach</span>(<span class="at">x=</span><span class="fu">c</span>(vote,region,income),{</span>
<span id="cb66-29"><a href="#cb66-29" tabindex="-1"></a>    <span class="fu">annotation</span>(x)[<span class="st">&quot;Remark&quot;</span>] <span class="ot">&lt;-</span> <span class="st">&quot;This is not a real survey item, of course ...&quot;</span></span>
<span id="cb66-30"><a href="#cb66-30" tabindex="-1"></a>    })</span>
<span id="cb66-31"><a href="#cb66-31" tabindex="-1"></a>  <span class="fu">missing.values</span>(vote) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">8</span>,<span class="dv">9</span>,<span class="dv">97</span>,<span class="dv">99</span>)</span>
<span id="cb66-32"><a href="#cb66-32" tabindex="-1"></a>  <span class="fu">missing.values</span>(region) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">97</span>,<span class="dv">99</span>)</span>
<span id="cb66-33"><a href="#cb66-33" tabindex="-1"></a></span>
<span id="cb66-34"><a href="#cb66-34" tabindex="-1"></a>  <span class="co"># These to variables do not appear in the</span></span>
<span id="cb66-35"><a href="#cb66-35" tabindex="-1"></a>  <span class="co"># the resulting data set, since they have the wrong length.</span></span>
<span id="cb66-36"><a href="#cb66-36" tabindex="-1"></a>  junk1 <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span></span>
<span id="cb66-37"><a href="#cb66-37" tabindex="-1"></a>  junk2 <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">5</span>,<span class="dv">4</span>,<span class="dv">4</span>)</span>
<span id="cb66-38"><a href="#cb66-38" tabindex="-1"></a>  </span>
<span id="cb66-39"><a href="#cb66-39" tabindex="-1"></a>})</span></code></pre></div>
<pre><code>Warning in within(Data, {: Variables &#39;junk1&#39;,&#39;junk2&#39; have wrong length,
removing them.</code></pre>
<p>Now that we have added information to the data set that reflects the
code plan of the variables, we take a look how the it looks like:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" tabindex="-1"></a>Data</span></code></pre></div>
<pre><code>
Data set with 300 observations and 3 variables

                   vote               region income
 1               Labour                Wales   4950
 2 *Not asked in survey *Not asked in survey    727
 3               Labour                Wales   1667
 4      *Not applicable *Not asked in survey   2970
 5        Conservatives              England   2943
 6      *Answer refused             Scotland   1351
 7        Conservatives              England   1540
 8                Other              England   2270
 9    Liberal Democrats              England   2047
10          *Don&#39;t know              England   6042
11      *Answer refused *Not asked in survey   1589
12    Liberal Democrats *Not asked in survey   5126
13        Conservatives              England   1206
14          *Don&#39;t know             Scotland   8878
15          *Don&#39;t know              England   2859
16    Liberal Democrats              England   1038
17               Labour             Scotland   1844
18               Labour              England   2928
19      *Answer refused *Not asked in survey    921
20      *Not applicable              England   2885
21        Conservatives             Scotland   1453
22                Other                Wales   1185
23          *Don&#39;t know             Scotland   3593
24               Labour                Wales   4981
25               Labour             Scotland   8243
.. .................... .................... ......
(25 of 300 observations shown)</code></pre>
<p>As you can see, labelled item look a bit like factors, but with a
difference: User-defined missing values are marked with an asterisk.</p>
<p>Subsetting a data set object works as expected:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" tabindex="-1"></a>EnglandData <span class="ot">&lt;-</span> <span class="fu">subset</span>(Data,region <span class="sc">==</span> <span class="st">&quot;England&quot;</span>)</span>
<span id="cb70-2"><a href="#cb70-2" tabindex="-1"></a>EnglandData</span></code></pre></div>
<pre><code>
Data set with 132 observations and 3 variables

                   vote  region income
 1        Conservatives England   2943
 2        Conservatives England   1540
 3                Other England   2270
 4    Liberal Democrats England   2047
 5          *Don&#39;t know England   6042
 6        Conservatives England   1206
 7          *Don&#39;t know England   2859
 8    Liberal Democrats England   1038
 9               Labour England   2928
10      *Not applicable England   2885
11                Other England   2155
12                Other England   1280
13      *Not applicable England   4111
14               Labour England    689
15 *Not asked in survey England   2421
16                Other England   5511
17 *Not asked in survey England   4628
18          *Don&#39;t know England    896
19          *Don&#39;t know England    842
20          *Don&#39;t know England    948
21        Conservatives England   2346
22        Conservatives England   1234
23                Other England   1186
24        Conservatives England   1215
25      *Not applicable England   5516
.. .................... ....... ......
(25 of 132 observations shown)</code></pre>
</div>
<div id="codebooks" class="section level2">
<h2>Codebooks of data sets</h2>
<p>Previouly, we created a code book for individual survey items. But it
is also possible to create a codebook for a whole data set (what one
usually wants to have a codebook of). Obtaining a codebook is simple, by
applying the function <code>codebook()</code> to the data frame:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" tabindex="-1"></a><span class="fu">codebook</span>(Data)</span></code></pre></div>
<pre><code>================================================================================

   vote &#39;Vote intention&#39;

   &quot;If a general election would take place next Tuesday, the candidate of which
   party would you vote for?&quot;

--------------------------------------------------------------------------------

   Storage mode: double
   Measurement: nominal
   Missing values: 8, 9, 97, 99

   Values and labels              N Valid Total
                                               
    1   &#39;Conservatives&#39;          32  21.1  10.7
    2   &#39;Labour&#39;                 41  27.0  13.7
    3   &#39;Liberal Democrats&#39;      36  23.7  12.0
    4   &#39;Other&#39;                  43  28.3  14.3
    8 M &#39;Don&#39;t know&#39;             47        15.7
    9 M &#39;Answer refused&#39;         29         9.7
   97 M &#39;Not applicable&#39;         28         9.3
   99 M &#39;Not asked in survey&#39;    44        14.7

   Remark:
       This is not a real survey item, of course ...

================================================================================

   region &#39;Region of residence&#39;

--------------------------------------------------------------------------------

   Storage mode: double
   Measurement: nominal
   Missing values: 97, 99

   Values and labels              N Valid Total
                                               
    1   &#39;England&#39;               132  51.4  44.0
    2   &#39;Scotland&#39;               87  33.9  29.0
    3   &#39;Wales&#39;                  38  14.8  12.7
   99 M &#39;Not asked in survey&#39;    43        14.3

   Remark:
       This is not a real survey item, of course ...

================================================================================

   income &#39;Household income&#39;

   &quot;All things taken into account, how much do all household members earn in
   sum?&quot;

--------------------------------------------------------------------------------

   Storage mode: double
   Measurement: ratio

        Min:   245.000
        Max: 13596.000
       Mean:  2556.743
   Std.Dev.:  2158.757

   Remark:
       This is not a real survey item, of course ...</code></pre>
<p>On a website, it looks better in HTML:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" tabindex="-1"></a><span class="fu">show_html</span>(<span class="fu">codebook</span>(Data))</span></code></pre></div>
<style>
.cbe-body table {
margin: unset;
}
.cbe-body table,
.cbe-body table tr,
.cbe-body table td
{
border-style: none;
padding: unset;
}
.cbe-header {
border-top: solid 2px;
border-bottom: solid 1px;
padding-left: 3ex;
}
.cbe-body {
padding-left: 3ex;
}
.cbe-table {
border-collapse: collapse;
}
.cbe-table td:nth-child(n of .header) {
text-align: center;
padding-left: .3em;
padding-right: .3em;
}
.cbe-vl-table td:nth-child(1) {
text-align: right;
padding-left: .3em;
padding-right: .3em;
}
.cbe-vl-table td:nth-child(2) {
text-align: center;
padding-left: .3em;
padding-right: .3em;
}
.cbe-vl-table td:nth-child(3) {
text-align: left;
padding-left: .3em;
padding-right: .3em;
}
.cbe-vl-table td:nth-child(4) {
text-align: right;
padding-left: .3em;
padding-right: .3em;
}
.cbe-vl-table td:nth-child(5),
.cbe-vl-table td:nth-child(8),
.cbe-vl-table td:nth-child(11),
.cbe-vl-table td:nth-child(14),
.cbe-vl-table td:nth-child(17),
.cbe-d-table td:nth-child(2),
.cbe-d-table td:nth-child(5){
text-align: right;
padding-left: .3em;
padding-right: 0px;
}
.cbe-vl-table td:nth-child(6),
.cbe-vl-table td:nth-child(9),
.cbe-vl-table td:nth-child(12),
.cbe-vl-table td:nth-child(15),
.cbe-vl-table td:nth-child(18),
.cbe-d-table td:nth-child(3),
.cbe-d-table td:nth-child(6) {
text-align: center;
padding-left: 0px;
padding-right: 0px;
width: 1px;
}
.cbe-vl-table td:nth-child(7),
.cbe-vl-table td:nth-child(10),
.cbe-vl-table td:nth-child(13),
.cbe-vl-table td:nth-child(16),
.cbe-vl-table td:nth-child(19),
.cbe-d-table td:nth-child(4),
.cbe-d-table td:nth-child(7) {
text-align: left;
padding-right: .3em;
padding-left: 0px;
}
.cbe-d-table td:nth-child(1){
text-align: left;
padding-left: .3em;
padding-right: .3em;
}
</style>
<div class="codebook">
<div class="codebook-entry">
<div class="cbe-header">
<p>
</p>
<p class="cbe-title" id="vote">
<code class="cbe-name">vote</code> — <span class="cbe-description">‘Vote
intention’</span>
</p>
<p class="cbe-wording">
“If a general election would take place next Tuesday, the candidate of
which party would you vote for?”
</p>
</div>
<div class="cbe-body">
<p>
</p>
<table class="cbe-spec">
<tr>
<td>
Storage mode:
</td>
<td>
double
</td>
</tr>
<tr>
<td>
Measurement:
</td>
<td>
nominal
</td>
</tr>
<tr>
<td>
Missing values:
</td>
<td>
8, 9, 97, 99
</td>
</tr>
</table>
<p>
</p>
<table class="cbe-table cbe-vl-table">
<tr>
<td colspan="3" class="header">
Values and labels
</td>
<td class="header">
N
</td>
<td colspan="3" class="header">
Valid
</td>
<td colspan="3" class="header">
Total
</td>
</tr>
<tr>
<td>
1
</td>
<td>
</td>
<td>
‘Conservatives’
</td>
<td>
32
</td>
<td>
21
</td>
<td>
.
</td>
<td>
1
</td>
<td>
10
</td>
<td>
.
</td>
<td>
7
</td>
</tr>
<tr>
<td>
2
</td>
<td>
</td>
<td>
‘Labour’
</td>
<td>
41
</td>
<td>
27
</td>
<td>
.
</td>
<td>
0
</td>
<td>
13
</td>
<td>
.
</td>
<td>
7
</td>
</tr>
<tr>
<td>
3
</td>
<td>
</td>
<td>
‘Liberal Democrats’
</td>
<td>
36
</td>
<td>
23
</td>
<td>
.
</td>
<td>
7
</td>
<td>
12
</td>
<td>
.
</td>
<td>
0
</td>
</tr>
<tr>
<td>
4
</td>
<td>
</td>
<td>
‘Other’
</td>
<td>
43
</td>
<td>
28
</td>
<td>
.
</td>
<td>
3
</td>
<td>
14
</td>
<td>
.
</td>
<td>
3
</td>
</tr>
<tr>
<td>
8
</td>
<td>
M
</td>
<td>
‘Don’t know’
</td>
<td>
47
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
15
</td>
<td>
.
</td>
<td>
7
</td>
</tr>
<tr>
<td>
9
</td>
<td>
M
</td>
<td>
‘Answer refused’
</td>
<td>
29
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
9
</td>
<td>
.
</td>
<td>
7
</td>
</tr>
<tr>
<td>
97
</td>
<td>
M
</td>
<td>
‘Not applicable’
</td>
<td>
28
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
9
</td>
<td>
.
</td>
<td>
3
</td>
</tr>
<tr>
<td>
99
</td>
<td>
M
</td>
<td>
‘Not asked in survey’
</td>
<td>
44
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
14
</td>
<td>
.
</td>
<td>
7
</td>
</tr>
</table>
<p>
</p>
<dl class="cbe-annotations">
<dt>
Remark:
</dt>
<dd>
This is not a real survey item, of course …
</dd>
</dl>
<p>
</p>
</div>
</div>
<div class="codebook-entry">
<div class="cbe-header">
<p>
</p>
<p class="cbe-title" id="region">
<code class="cbe-name">region</code> — <span class="cbe-description">‘Region of residence’</span>
</p>
</div>
<div class="cbe-body">
<p>
</p>
<table class="cbe-spec">
<tr>
<td>
Storage mode:
</td>
<td>
double
</td>
</tr>
<tr>
<td>
Measurement:
</td>
<td>
nominal
</td>
</tr>
<tr>
<td>
Missing values:
</td>
<td>
97, 99
</td>
</tr>
</table>
<p>
</p>
<table class="cbe-table cbe-vl-table">
<tr>
<td colspan="3" class="header">
Values and labels
</td>
<td class="header">
N
</td>
<td colspan="3" class="header">
Valid
</td>
<td colspan="3" class="header">
Total
</td>
</tr>
<tr>
<td>
1
</td>
<td>
</td>
<td>
‘England’
</td>
<td>
132
</td>
<td>
51
</td>
<td>
.
</td>
<td>
4
</td>
<td>
44
</td>
<td>
.
</td>
<td>
0
</td>
</tr>
<tr>
<td>
2
</td>
<td>
</td>
<td>
‘Scotland’
</td>
<td>
87
</td>
<td>
33
</td>
<td>
.
</td>
<td>
9
</td>
<td>
29
</td>
<td>
.
</td>
<td>
0
</td>
</tr>
<tr>
<td>
3
</td>
<td>
</td>
<td>
‘Wales’
</td>
<td>
38
</td>
<td>
14
</td>
<td>
.
</td>
<td>
8
</td>
<td>
12
</td>
<td>
.
</td>
<td>
7
</td>
</tr>
<tr>
<td>
99
</td>
<td>
M
</td>
<td>
‘Not asked in survey’
</td>
<td>
43
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
14
</td>
<td>
.
</td>
<td>
3
</td>
</tr>
</table>
<p>
</p>
<dl class="cbe-annotations">
<dt>
Remark:
</dt>
<dd>
This is not a real survey item, of course …
</dd>
</dl>
<p>
</p>
</div>
</div>
<div class="codebook-entry">
<div class="cbe-header">
<p>
</p>
<p class="cbe-title" id="income">
<code class="cbe-name">income</code> — <span class="cbe-description">‘Household income’</span>
</p>
<p class="cbe-wording">
“All things taken into account, how much do all household members earn
in sum?”
</p>
</div>
<div class="cbe-body">
<p>
</p>
<table class="cbe-spec">
<tr>
<td>
Storage mode:
</td>
<td>
double
</td>
</tr>
<tr>
<td>
Measurement:
</td>
<td>
ratio
</td>
</tr>
</table>
<p>
</p>
<table class="cbe-table cbe-d-table">
<tr>
<td>
Min:
</td>
<td>
245
</td>
<td>
.
</td>
<td>
000
</td>
</tr>
<tr>
<td>
Max:
</td>
<td>
13596
</td>
<td>
.
</td>
<td>
000
</td>
</tr>
<tr>
<td>
Mean:
</td>
<td>
2556
</td>
<td>
.
</td>
<td>
743
</td>
</tr>
<tr>
<td>
Std.Dev.:
</td>
<td>
2158
</td>
<td>
.
</td>
<td>
757
</td>
</tr>
</table>
<p>
</p>
<dl class="cbe-annotations">
<dt>
Remark:
</dt>
<dd>
This is not a real survey item, of course …
</dd>
</dl>
<p>
</p>
</div>
</div>
</div>
</div>
<div id="translating-data-sets-into-data-frames" class="section level2">
<h2>Translating data sets into data frames</h2>
<p>The punchline of the existence of <code>&quot;data.set&quot;</code> objects
however is that they can be coerced into regular data frames, using
<code>as.data.frame()</code>, which causes survey items to be translated
into regular numeric vectors or factors using <code>as.numeric()</code>,
<code>as.factor()</code> or <code>as.ordered()</code> as above, and
pre-determined missing values changed into <code>NA</code>. Whether a
survey item is changed into a numerical vector, an unordered or an
ordered factor depends on the declared measurement level (which can be
manipulated by <code>measurement()</code> as shown above).</p>
<p>In the example developed so far, the variables <code>vote</code> and
<code>region</code> are declared to have a nominal level of measurement,
while <code>income</code> is declared to have a ratio scale. That is, in
statistical analyses, we want the first two variables to be handled as
(unordered) factors, and the income variable as a numerical vector. In
addition, we want all the user-declared missing values to be changed
into <code>NA</code> so that observations where respondents stated to
“don’t know” what they are goint go vote for are excluded from the
analysis. So let’s see whether this works - we coerce our data set into
a data frame:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" tabindex="-1"></a>DataFr <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(Data)</span>
<span id="cb75-2"><a href="#cb75-2" tabindex="-1"></a><span class="do">## Looking a the data frame structure</span></span>
<span id="cb75-3"><a href="#cb75-3" tabindex="-1"></a><span class="fu">str</span>(DataFr)</span></code></pre></div>
<pre><code>&#39;data.frame&#39;:   300 obs. of  3 variables:
 $ vote  : Factor w/ 4 levels &quot;Conservatives&quot;,..: 2 NA 2 NA 1 NA 1 4 3 NA ...
  ..- attr(*, &quot;label&quot;)= chr &quot;Vote intention&quot;
 $ region: Factor w/ 3 levels &quot;England&quot;,&quot;Scotland&quot;,..: 3 NA 3 NA 1 2 1 1 1 1 ...
  ..- attr(*, &quot;label&quot;)= chr &quot;Region of residence&quot;
 $ income: num  4950 727 1667 2970 2943 ...
  ..- attr(*, &quot;label&quot;)= chr &quot;Household income&quot;</code></pre>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" tabindex="-1"></a><span class="do">## Looking at the first 25 observations</span></span>
<span id="cb77-2"><a href="#cb77-2" tabindex="-1"></a>DataFr[<span class="dv">1</span><span class="sc">:</span><span class="dv">25</span>,]</span></code></pre></div>
<pre><code>                vote   region income
1             Labour    Wales   4950
2               &lt;NA&gt;     &lt;NA&gt;    727
3             Labour    Wales   1667
4               &lt;NA&gt;     &lt;NA&gt;   2970
5      Conservatives  England   2943
6               &lt;NA&gt; Scotland   1351
7      Conservatives  England   1540
8              Other  England   2270
9  Liberal Democrats  England   2047
10              &lt;NA&gt;  England   6042
11              &lt;NA&gt;     &lt;NA&gt;   1589
12 Liberal Democrats     &lt;NA&gt;   5126
13     Conservatives  England   1206
14              &lt;NA&gt; Scotland   8878
15              &lt;NA&gt;  England   2859
16 Liberal Democrats  England   1038
17            Labour Scotland   1844
18            Labour  England   2928
19              &lt;NA&gt;     &lt;NA&gt;    921
20              &lt;NA&gt;  England   2885
21     Conservatives Scotland   1453
22             Other    Wales   1185
23              &lt;NA&gt; Scotland   3593
24            Labour    Wales   4981
25            Labour Scotland   8243</code></pre>
<p>Indeed the translation works as expected, so we can use it for
statistical analysis, here a simple cross tab:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="sc">~</span>vote<span class="sc">+</span>region,<span class="at">data=</span>DataFr)</span></code></pre></div>
<pre><code>                   region
vote                England Scotland Wales
  Conservatives          16        4     7
  Labour                 12       17     7
  Liberal Democrats      20        7     3
  Other                  24       13     4</code></pre>
<p>In fact, since many functions such as <code>xtabs()</code>,
<code>lm()</code>, <code>glm()</code>, etc. coerce theire
<code>data=</code> argument into a data frame, an explicit coercion with
<code>as.data.frame()</code> is not always needed:</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="sc">~</span>vote<span class="sc">+</span>region,<span class="at">data=</span>Data)</span></code></pre></div>
<pre><code>                   region
vote                England Scotland Wales
  Conservatives          16        4     7
  Labour                 12       17     7
  Liberal Democrats      20        7     3
  Other                  24       13     4</code></pre>
<p>Sometimes we do want missing values to be included, and this is
possible too:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="sc">~</span>vote<span class="sc">+</span>region,<span class="at">data=</span><span class="fu">within</span>(Data, </span>
<span id="cb83-2"><a href="#cb83-2" tabindex="-1"></a>                               vote <span class="ot">&lt;-</span> <span class="fu">include.missings</span>(vote)))</span></code></pre></div>
<pre><code>                      region
vote                   England Scotland Wales
  Conservatives             16        4     7
  Labour                    12       17     7
  Liberal Democrats         20        7     3
  Other                     24       13     4
  *Don&#39;t know               19       19     4
  *Answer refused           11       10     3
  *Not applicable           12        5     6
  *Not asked in survey      18       12     4</code></pre>
<p>For convenience, there is also a codebook method for data frames:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" tabindex="-1"></a><span class="fu">show_html</span>(<span class="fu">codebook</span>(DataFr))</span></code></pre></div>
<style>
.cbe-body table {
margin: unset;
}
.cbe-body table,
.cbe-body table tr,
.cbe-body table td
{
border-style: none;
padding: unset;
}
.cbe-header {
border-top: solid 2px;
border-bottom: solid 1px;
padding-left: 3ex;
}
.cbe-body {
padding-left: 3ex;
}
.cbe-table {
border-collapse: collapse;
}
.cbe-table td:nth-child(n of .header) {
text-align: center;
padding-left: .3em;
padding-right: .3em;
}
.cbe-vl-table td:nth-child(1) {
text-align: right;
padding-left: .3em;
padding-right: .3em;
}
.cbe-vl-table td:nth-child(2) {
text-align: center;
padding-left: .3em;
padding-right: .3em;
}
.cbe-vl-table td:nth-child(3) {
text-align: left;
padding-left: .3em;
padding-right: .3em;
}
.cbe-vl-table td:nth-child(4) {
text-align: right;
padding-left: .3em;
padding-right: .3em;
}
.cbe-vl-table td:nth-child(5),
.cbe-vl-table td:nth-child(8),
.cbe-vl-table td:nth-child(11),
.cbe-vl-table td:nth-child(14),
.cbe-vl-table td:nth-child(17),
.cbe-d-table td:nth-child(2),
.cbe-d-table td:nth-child(5){
text-align: right;
padding-left: .3em;
padding-right: 0px;
}
.cbe-vl-table td:nth-child(6),
.cbe-vl-table td:nth-child(9),
.cbe-vl-table td:nth-child(12),
.cbe-vl-table td:nth-child(15),
.cbe-vl-table td:nth-child(18),
.cbe-d-table td:nth-child(3),
.cbe-d-table td:nth-child(6) {
text-align: center;
padding-left: 0px;
padding-right: 0px;
width: 1px;
}
.cbe-vl-table td:nth-child(7),
.cbe-vl-table td:nth-child(10),
.cbe-vl-table td:nth-child(13),
.cbe-vl-table td:nth-child(16),
.cbe-vl-table td:nth-child(19),
.cbe-d-table td:nth-child(4),
.cbe-d-table td:nth-child(7) {
text-align: left;
padding-right: .3em;
padding-left: 0px;
}
.cbe-d-table td:nth-child(1){
text-align: left;
padding-left: .3em;
padding-right: .3em;
}
</style>
<div class="codebook">
<div class="codebook-entry">
<div class="cbe-header">
<p>
</p>
<p class="cbe-title" id="vote">
<code class="cbe-name">vote</code> — <span class="cbe-description">‘Vote
intention’</span>
</p>
</div>
<div class="cbe-body">
<p>
</p>
<table class="cbe-spec">
<tr>
<td>
Storage mode:
</td>
<td>
integer
</td>
</tr>
<tr>
<td>
Factor with
</td>
<td>
4 levels
</td>
</tr>
</table>
<p>
</p>
<table class="cbe-table cbe-vl-table">
<tr>
<td colspan="3" class="header">
Values and labels
</td>
<td class="header">
N
</td>
<td colspan="3" class="header">
Valid
</td>
<td colspan="3" class="header">
Total
</td>
</tr>
<tr>
<td>
1
</td>
<td>
</td>
<td>
‘Conservatives’
</td>
<td>
32
</td>
<td>
21
</td>
<td>
.
</td>
<td>
1
</td>
<td>
10
</td>
<td>
.
</td>
<td>
7
</td>
</tr>
<tr>
<td>
2
</td>
<td>
</td>
<td>
‘Labour’
</td>
<td>
41
</td>
<td>
27
</td>
<td>
.
</td>
<td>
0
</td>
<td>
13
</td>
<td>
.
</td>
<td>
7
</td>
</tr>
<tr>
<td>
3
</td>
<td>
</td>
<td>
‘Liberal Democrats’
</td>
<td>
36
</td>
<td>
23
</td>
<td>
.
</td>
<td>
7
</td>
<td>
12
</td>
<td>
.
</td>
<td>
0
</td>
</tr>
<tr>
<td>
4
</td>
<td>
</td>
<td>
‘Other’
</td>
<td>
43
</td>
<td>
28
</td>
<td>
.
</td>
<td>
3
</td>
<td>
14
</td>
<td>
.
</td>
<td>
3
</td>
</tr>
<tr>
<td>
</td>
<td>
</td>
<td>
NA
</td>
<td>
148
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
49
</td>
<td>
.
</td>
<td>
3
</td>
</tr>
</table>
<p>
</p>
</div>
</div>
<div class="codebook-entry">
<div class="cbe-header">
<p>
</p>
<p class="cbe-title" id="region">
<code class="cbe-name">region</code> — <span class="cbe-description">‘Region of residence’</span>
</p>
</div>
<div class="cbe-body">
<p>
</p>
<table class="cbe-spec">
<tr>
<td>
Storage mode:
</td>
<td>
integer
</td>
</tr>
<tr>
<td>
Factor with
</td>
<td>
3 levels
</td>
</tr>
</table>
<p>
</p>
<table class="cbe-table cbe-vl-table">
<tr>
<td colspan="3" class="header">
Values and labels
</td>
<td class="header">
N
</td>
<td colspan="3" class="header">
Valid
</td>
<td colspan="3" class="header">
Total
</td>
</tr>
<tr>
<td>
1
</td>
<td>
</td>
<td>
‘England’
</td>
<td>
132
</td>
<td>
51
</td>
<td>
.
</td>
<td>
4
</td>
<td>
44
</td>
<td>
.
</td>
<td>
0
</td>
</tr>
<tr>
<td>
2
</td>
<td>
</td>
<td>
‘Scotland’
</td>
<td>
87
</td>
<td>
33
</td>
<td>
.
</td>
<td>
9
</td>
<td>
29
</td>
<td>
.
</td>
<td>
0
</td>
</tr>
<tr>
<td>
3
</td>
<td>
</td>
<td>
‘Wales’
</td>
<td>
38
</td>
<td>
14
</td>
<td>
.
</td>
<td>
8
</td>
<td>
12
</td>
<td>
.
</td>
<td>
7
</td>
</tr>
<tr>
<td>
</td>
<td>
</td>
<td>
NA
</td>
<td>
43
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
14
</td>
<td>
.
</td>
<td>
3
</td>
</tr>
</table>
<p>
</p>
</div>
</div>
<div class="codebook-entry">
<div class="cbe-header">
<p>
</p>
<p class="cbe-title" id="income">
<code class="cbe-name">income</code> — <span class="cbe-description">‘Household income’</span>
</p>
</div>
<div class="cbe-body">
<p>
</p>
<table class="cbe-spec">
<tr>
<td>
Storage mode:
</td>
<td>
double
</td>
</tr>
</table>
<p>
</p>
<table class="cbe-table cbe-d-table">
<tr>
<td>
Min:
</td>
<td>
245
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
Max:
</td>
<td>
13596
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
Mean:
</td>
<td>
2557
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
Std.Dev.:
</td>
<td>
2159
</td>
<td>
</td>
<td>
</td>
</tr>
</table>
<p>
</p>
</div>
</div>
</div>
</div>
</div>
<div id="more-tools-for-data-preparation" class="section level1">
<h1>More tools for data preparation</h1>
<p>When social scientists work with survey data, these are not always
organised and coded in a way that suits the intended data analysis. For
this reasons, the <code>&quot;memisc&quot;</code> package provides the two
functions <code>recode()</code> and <code>cases()</code>. The former is
– as the name suggests – for recoding, while the second allows for
complex distinctions of cases and can be seen as a more general version
of <code>ifelse()</code>. These two functions are demonstrated with a
“real-life” example.</p>
<div id="recode" class="section level2">
<h2>Recoding</h2>
<p>The function <code>recode()</code> is similar in semantics to the
function of the same name in package <a href="https://cran.r-project.org/package=car"><code>&quot;car&quot;</code></a> and
designed in such a way that it does not conflict with this function. In
fact, if <code>recode()</code> is called in the way as expected in
package <code>&quot;car&quot;</code>, it will dispatch processing to this
function. In other words, users of this other package may use
<code>recode()</code> as they are used to. The version of the
<code>recode()</code> function provided by <code>&quot;memisc&quot;</code> differs
from the <code>&quot;car&quot;</code> version in so far as its syntax is more
R-ish (or so I believe).</p>
<p>Here we load an example data set – a subset of the German
Longitudinal Election Study for 2013<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a> – into R’s memory.</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" tabindex="-1"></a><span class="fu">load</span>(<span class="fu">system.file</span>(<span class="st">&quot;gles/gles2013work.RData&quot;</span>,<span class="at">package=</span><span class="st">&quot;memisc&quot;</span>))</span></code></pre></div>
<p>As a simple example for the use of <code>recode()</code> we use this
function to recode German Bundesländer into an item with two values or
East and West Germany. But first we create a codebook for the variable
that contains the Bundesländer codes:</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" tabindex="-1"></a><span class="fu">with</span>(gles2013work,</span>
<span id="cb87-2"><a href="#cb87-2" tabindex="-1"></a>     <span class="fu">show_html</span>(<span class="fu">codebook</span>(bula)))</span></code></pre></div>
<style>
.cbe-body table {
margin: unset;
}
.cbe-body table,
.cbe-body table tr,
.cbe-body table td
{
border-style: none;
padding: unset;
}
.cbe-header {
border-top: solid 2px;
border-bottom: solid 1px;
padding-left: 3ex;
}
.cbe-body {
padding-left: 3ex;
}
.cbe-table {
border-collapse: collapse;
}
.cbe-table td:nth-child(n of .header) {
text-align: center;
padding-left: .3em;
padding-right: .3em;
}
.cbe-vl-table td:nth-child(1) {
text-align: right;
padding-left: .3em;
padding-right: .3em;
}
.cbe-vl-table td:nth-child(2) {
text-align: center;
padding-left: .3em;
padding-right: .3em;
}
.cbe-vl-table td:nth-child(3) {
text-align: left;
padding-left: .3em;
padding-right: .3em;
}
.cbe-vl-table td:nth-child(4) {
text-align: right;
padding-left: .3em;
padding-right: .3em;
}
.cbe-vl-table td:nth-child(5),
.cbe-vl-table td:nth-child(8),
.cbe-vl-table td:nth-child(11),
.cbe-vl-table td:nth-child(14),
.cbe-vl-table td:nth-child(17),
.cbe-d-table td:nth-child(2),
.cbe-d-table td:nth-child(5){
text-align: right;
padding-left: .3em;
padding-right: 0px;
}
.cbe-vl-table td:nth-child(6),
.cbe-vl-table td:nth-child(9),
.cbe-vl-table td:nth-child(12),
.cbe-vl-table td:nth-child(15),
.cbe-vl-table td:nth-child(18),
.cbe-d-table td:nth-child(3),
.cbe-d-table td:nth-child(6) {
text-align: center;
padding-left: 0px;
padding-right: 0px;
width: 1px;
}
.cbe-vl-table td:nth-child(7),
.cbe-vl-table td:nth-child(10),
.cbe-vl-table td:nth-child(13),
.cbe-vl-table td:nth-child(16),
.cbe-vl-table td:nth-child(19),
.cbe-d-table td:nth-child(4),
.cbe-d-table td:nth-child(7) {
text-align: left;
padding-right: .3em;
padding-left: 0px;
}
.cbe-d-table td:nth-child(1){
text-align: left;
padding-left: .3em;
padding-right: .3em;
}
</style>
<div class="codebook">
<div class="codebook-entry">
<div class="cbe-header">
<p>
</p>
<p class="cbe-title" id="bula">
<code class="cbe-name">bula</code> — <span class="cbe-description">‘Bundesland’</span>
</p>
</div>
<div class="cbe-body">
<p>
</p>
<table class="cbe-spec">
<tr>
<td>
Storage mode:
</td>
<td>
double
</td>
</tr>
<tr>
<td>
Measurement:
</td>
<td>
nominal
</td>
</tr>
</table>
<p>
</p>
<table class="cbe-table cbe-vl-table">
<tr>
<td colspan="3" class="header">
Values and labels
</td>
<td class="header">
N
</td>
<td colspan="3" class="header">
Percent
</td>
</tr>
<tr>
<td>
1
</td>
<td>
</td>
<td>
‘Baden-Wuerttemberg’
</td>
<td>
333
</td>
<td>
8
</td>
<td>
.
</td>
<td>
5
</td>
</tr>
<tr>
<td>
2
</td>
<td>
</td>
<td>
‘Bayern’
</td>
<td>
507
</td>
<td>
13
</td>
<td>
.
</td>
<td>
0
</td>
</tr>
<tr>
<td>
3
</td>
<td>
</td>
<td>
‘Berlin’
</td>
<td>
190
</td>
<td>
4
</td>
<td>
.
</td>
<td>
9
</td>
</tr>
<tr>
<td>
4
</td>
<td>
</td>
<td>
‘Brandenburg’
</td>
<td>
212
</td>
<td>
5
</td>
<td>
.
</td>
<td>
4
</td>
</tr>
<tr>
<td>
5
</td>
<td>
</td>
<td>
‘Bremen’
</td>
<td>
27
</td>
<td>
0
</td>
<td>
.
</td>
<td>
7
</td>
</tr>
<tr>
<td>
6
</td>
<td>
</td>
<td>
‘Hamburg’
</td>
<td>
49
</td>
<td>
1
</td>
<td>
.
</td>
<td>
3
</td>
</tr>
<tr>
<td>
7
</td>
<td>
</td>
<td>
‘Hessen’
</td>
<td>
232
</td>
<td>
5
</td>
<td>
.
</td>
<td>
9
</td>
</tr>
<tr>
<td>
8
</td>
<td>
</td>
<td>
‘Mecklenburg-Vorpommern’
</td>
<td>
160
</td>
<td>
4
</td>
<td>
.
</td>
<td>
1
</td>
</tr>
<tr>
<td>
9
</td>
<td>
</td>
<td>
‘Niedersachsen’
</td>
<td>
331
</td>
<td>
8
</td>
<td>
.
</td>
<td>
5
</td>
</tr>
<tr>
<td>
10
</td>
<td>
</td>
<td>
‘Nordrhein-Westfalen’
</td>
<td>
619
</td>
<td>
15
</td>
<td>
.
</td>
<td>
8
</td>
</tr>
<tr>
<td>
11
</td>
<td>
</td>
<td>
‘Rheinland-Pfalz’
</td>
<td>
150
</td>
<td>
3
</td>
<td>
.
</td>
<td>
8
</td>
</tr>
<tr>
<td>
12
</td>
<td>
</td>
<td>
‘Saarland’
</td>
<td>
45
</td>
<td>
1
</td>
<td>
.
</td>
<td>
2
</td>
</tr>
<tr>
<td>
13
</td>
<td>
</td>
<td>
‘Sachsen’
</td>
<td>
402
</td>
<td>
10
</td>
<td>
.
</td>
<td>
3
</td>
</tr>
<tr>
<td>
14
</td>
<td>
</td>
<td>
‘Sachsen-Anhalt’
</td>
<td>
252
</td>
<td>
6
</td>
<td>
.
</td>
<td>
4
</td>
</tr>
<tr>
<td>
15
</td>
<td>
</td>
<td>
‘Schleswig-Holstein’
</td>
<td>
131
</td>
<td>
3
</td>
<td>
.
</td>
<td>
3
</td>
</tr>
<tr>
<td>
16
</td>
<td>
</td>
<td>
‘Thueringen’
</td>
<td>
271
</td>
<td>
6
</td>
<td>
.
</td>
<td>
9
</td>
</tr>
</table>
<p>
</p>
</div>
</div>
</div>
<p>We now recode the Bundesländer codes into a new variable:</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" tabindex="-1"></a>gles2013work <span class="ot">&lt;-</span> <span class="fu">within</span>(gles2013work,</span>
<span id="cb88-2"><a href="#cb88-2" tabindex="-1"></a>                       east.west <span class="ot">&lt;-</span> <span class="fu">recode</span>(bula,</span>
<span id="cb88-3"><a href="#cb88-3" tabindex="-1"></a>                                          <span class="at">East =</span> <span class="dv">1</span> <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">8</span>,<span class="dv">13</span>,<span class="dv">14</span>,<span class="dv">16</span>),</span>
<span id="cb88-4"><a href="#cb88-4" tabindex="-1"></a>                                          <span class="at">West =</span> <span class="dv">2</span> <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">5</span><span class="sc">:</span><span class="dv">7</span>,<span class="dv">9</span><span class="sc">:</span><span class="dv">12</span>,<span class="dv">15</span>)</span>
<span id="cb88-5"><a href="#cb88-5" tabindex="-1"></a>                                          ))</span></code></pre></div>
<p>and check whether this was successful:</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="sc">~</span>bula<span class="sc">+</span>east.west,<span class="at">data=</span>gles2013work)</span></code></pre></div>
<pre><code>                        east.west
bula                     East West
  Baden-Wuerttemberg        0  333
  Bayern                    0  507
  Berlin                  190    0
  Brandenburg             212    0
  Bremen                    0   27
  Hamburg                   0   49
  Hessen                    0  232
  Mecklenburg-Vorpommern  160    0
  Niedersachsen             0  331
  Nordrhein-Westfalen       0  619
  Rheinland-Pfalz           0  150
  Saarland                  0   45
  Sachsen                 402    0
  Sachsen-Anhalt          252    0
  Schleswig-Holstein        0  131
  Thueringen              271    0</code></pre>
<p>as can be seen, <code>recode()</code> was called in such a way that
not only old codes are transferred into new ones, but also the new codes
are labelled.</p>
</div>
<div id="case-distinctions" class="section level2">
<h2>Case distinctions</h2>
<p>Recoding can be used to combine the codes of an item into a smaller
set, but sometimes one needs to do more complex data preparations, in
which the values of some variable are set conditional on values of
another one, etc. For such tasks, the <code>&quot;memisc&quot;</code> package
provides the function <code>cases()</code>. This function takes several
expressions that evaluate to logical vectors as arguments and returns a
numeric vector or a factor, the values or level of which indicate for
each observation which of the expressions evaluates to <code>TRUE</code>
the respective observation. The factor levels are named after the
logical expressions. A simple example looks thus:</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb91-2"><a href="#cb91-2" tabindex="-1"></a>xc <span class="ot">&lt;-</span> <span class="fu">cases</span>(x <span class="sc">&lt;=</span> <span class="dv">3</span>, </span>
<span id="cb91-3"><a href="#cb91-3" tabindex="-1"></a>            x <span class="sc">&gt;</span> <span class="dv">3</span> <span class="sc">&amp;</span> x <span class="sc">&lt;=</span> <span class="dv">7</span>, </span>
<span id="cb91-4"><a href="#cb91-4" tabindex="-1"></a>            x <span class="sc">&gt;</span> <span class="dv">7</span>)</span>
<span id="cb91-5"><a href="#cb91-5" tabindex="-1"></a><span class="fu">data.frame</span>(x,xc)</span></code></pre></div>
<pre><code>    x             xc
1   1         x &lt;= 3
2   2         x &lt;= 3
3   3         x &lt;= 3
4   4 x &gt; 3 &amp; x &lt;= 7
5   5 x &gt; 3 &amp; x &lt;= 7
6   6 x &gt; 3 &amp; x &lt;= 7
7   7 x &gt; 3 &amp; x &lt;= 7
8   8          x &gt; 7
9   9          x &gt; 7
10 10          x &gt; 7</code></pre>
<p>In this example <code>cases()</code> returns a factor. It can also be
made to return a numeric value:</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" tabindex="-1"></a>xn <span class="ot">&lt;-</span> <span class="fu">cases</span>(<span class="dv">1</span> <span class="ot">&lt;-</span> x <span class="sc">&lt;=</span> <span class="dv">3</span>, </span>
<span id="cb93-2"><a href="#cb93-2" tabindex="-1"></a>            <span class="dv">2</span> <span class="ot">&lt;-</span> x <span class="sc">&gt;</span> <span class="dv">3</span> <span class="sc">&amp;</span> x <span class="sc">&lt;=</span> <span class="dv">7</span>, </span>
<span id="cb93-3"><a href="#cb93-3" tabindex="-1"></a>            <span class="dv">3</span> <span class="ot">&lt;-</span> x <span class="sc">&gt;</span> <span class="dv">7</span>)</span>
<span id="cb93-4"><a href="#cb93-4" tabindex="-1"></a><span class="fu">data.frame</span>(x,xn)</span></code></pre></div>
<pre><code>    x xn
1   1  1
2   2  1
3   3  1
4   4  2
5   5  2
6   6  2
7   7  2
8   8  3
9   9  3
10 10  3</code></pre>
<p>This example shows the way <code>cases()</code> works in the
abstract. How this can be made used of in practical example is best
demonstrated by a real-world example, again using data from the German
Longitudinal Election Study.</p>
<p>In the 2013 election module, the intention to vote during the
pre-election of respondents interviewed in the pre-election wave
(<code>wave==1</code>) and the participation in the election of
respondents interviewed in the post-election wave (<code>wave==2</code>)
are recorded in different data set variables, named here
<code>intent.turnout</code> and <code>turnout</code>. The variable
<code>intent.voteint</code> has codes for whether the respondents were
sure to participate (1), were likely to participate (2), were undecided
(3), likely not to (4), sure not to participate (5), or whether they
have cast a postal vote (6). Variable <code>turnout</code> has codes for
those who participated in the election (1) or did not (2).</p>
<p>The intention for the candidate vote is recorded in variable
<code>voteint.candidate</code> and the intention for the list vote is
recoded in variable <code>voteint.list</code> for the pre-election wave.
A postal vote for party candidate is recorded in variable
<code>postal.vote.candidate</code> and for a party list is in variable
<code>postal.vote.list</code>. Recalled votes in the post-election wave
are recorded in variables <code>vote.candidate</code> and
<code>vote.list</code>.</p>
<p>These various variables are combined into two variables that has
valid values for both waves, <code>candidate.vote</code> and
<code>list.vote</code>. For this, several conditions have to be handled:
whether a respondent is in the pre-election or the post-election wave,
whether s/he is not likely or sure not to vote, or whether she has cast
a postal vote. Thus the variable <code>cases()</code> is helpful
here:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" tabindex="-1"></a>gles2013work <span class="ot">&lt;-</span> <span class="fu">within</span>(gles2013work,{</span>
<span id="cb95-2"><a href="#cb95-2" tabindex="-1"></a></span>
<span id="cb95-3"><a href="#cb95-3" tabindex="-1"></a>  candidate.vote <span class="ot">&lt;-</span> <span class="fu">cases</span>(</span>
<span id="cb95-4"><a href="#cb95-4" tabindex="-1"></a>              wave <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> intent.turnout <span class="sc">==</span> <span class="dv">6</span> <span class="ot">-&gt;</span> postal.vote.candidate,</span>
<span id="cb95-5"><a href="#cb95-5" tabindex="-1"></a>              wave <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> intent.turnout <span class="sc">%in%</span> <span class="dv">4</span><span class="sc">:</span><span class="dv">5</span> <span class="ot">-&gt;</span> <span class="dv">900</span>,</span>
<span id="cb95-6"><a href="#cb95-6" tabindex="-1"></a>              wave <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> intent.turnout <span class="sc">%in%</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span> <span class="ot">-&gt;</span> voteint.candidate,</span>
<span id="cb95-7"><a href="#cb95-7" tabindex="-1"></a>              wave <span class="sc">==</span> <span class="dv">2</span> <span class="sc">&amp;</span> turnout <span class="sc">==</span> <span class="dv">1</span> <span class="ot">-&gt;</span> vote.candidate,</span>
<span id="cb95-8"><a href="#cb95-8" tabindex="-1"></a>              wave <span class="sc">==</span> <span class="dv">2</span> <span class="sc">&amp;</span> turnout <span class="sc">==</span> <span class="dv">2</span> <span class="ot">-&gt;</span> <span class="dv">900</span></span>
<span id="cb95-9"><a href="#cb95-9" tabindex="-1"></a>            )</span>
<span id="cb95-10"><a href="#cb95-10" tabindex="-1"></a></span>
<span id="cb95-11"><a href="#cb95-11" tabindex="-1"></a>  list.vote <span class="ot">&lt;-</span> <span class="fu">cases</span>(</span>
<span id="cb95-12"><a href="#cb95-12" tabindex="-1"></a>              wave <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> intent.turnout <span class="sc">==</span> <span class="dv">6</span> <span class="ot">-&gt;</span> postal.vote.list,</span>
<span id="cb95-13"><a href="#cb95-13" tabindex="-1"></a>              wave <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> intent.turnout <span class="sc">%in%</span> <span class="dv">4</span><span class="sc">:</span><span class="dv">5</span> <span class="ot">-&gt;</span> <span class="dv">900</span>,</span>
<span id="cb95-14"><a href="#cb95-14" tabindex="-1"></a>              wave <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> intent.turnout <span class="sc">%in%</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span> <span class="ot">-&gt;</span> voteint.list,</span>
<span id="cb95-15"><a href="#cb95-15" tabindex="-1"></a>              wave <span class="sc">==</span> <span class="dv">2</span> <span class="sc">&amp;</span> turnout <span class="sc">==</span><span class="dv">1</span> <span class="ot">-&gt;</span> vote.list,</span>
<span id="cb95-16"><a href="#cb95-16" tabindex="-1"></a>              wave <span class="sc">==</span> <span class="dv">2</span> <span class="sc">&amp;</span> turnout <span class="sc">==</span><span class="dv">2</span> <span class="ot">-&gt;</span> <span class="dv">900</span></span>
<span id="cb95-17"><a href="#cb95-17" tabindex="-1"></a>            )</span>
<span id="cb95-18"><a href="#cb95-18" tabindex="-1"></a>})</span></code></pre></div>
<pre><code>Warning in cases(postal.vote.candidate &lt;- wave == 1 &amp; intent.turnout == : 78
NAs created</code></pre>
<pre><code>Warning in cases(postal.vote.list &lt;- wave == 1 &amp; intent.turnout == 6, 900 &lt;-
wave == : 78 NAs created</code></pre>
<p>The code shown above does the following: In the pre-election wave
(<code>wave == 1</code>), the <code>candidate.vote</code> variable
receives the value of the postal vote variable
<code>postal.vote.candidate</code> if a postal vote was cast
(<code>intent.turnout == 6</code>), it receives the value
<code>900</code> for those respondents who where likely or sure not to
vote (<code>intent.turnout %in% 4:5</code>), and the value of the
variable <code>voteint.candidate</code> for all others
(<code>intent.turnout %in% 1:3</code>). In the post-election wave
(<code>wave == 2</code>) variable <code>candidate.vote</code> receives
the value of variable <code>vote.candidate</code> if the respondent has
voted (<code>turnout == 1</code>) or the value <code>900</code> if s/he
has not voted (<code>turnout == 2</code>). The variable
<code>list.vote</code> is constructed in an analogous manner from the
variables <code>wave</code>, <code>intent.turnout</code>,
<code>turnout</code>, <code>postal.vote.list</code>,
<code>voteint.list</code> and <code>vote.list</code>. After the
constructin, the resulting variables <code>candidate.vote</code> and
<code>list.vote</code> are labelled and missing values are declared:</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" tabindex="-1"></a>gles2013work <span class="ot">&lt;-</span> <span class="fu">within</span>(gles2013work,{</span>
<span id="cb98-2"><a href="#cb98-2" tabindex="-1"></a>  candidate.vote <span class="ot">&lt;-</span> <span class="fu">recode</span>(<span class="fu">as.item</span>(candidate.vote),</span>
<span id="cb98-3"><a href="#cb98-3" tabindex="-1"></a>                      <span class="st">&quot;CDU/CSU&quot;</span>   <span class="ot">=</span>  <span class="dv">1</span> <span class="ot">&lt;-</span> <span class="dv">1</span>,</span>
<span id="cb98-4"><a href="#cb98-4" tabindex="-1"></a>                      <span class="st">&quot;SPD&quot;</span>       <span class="ot">=</span>  <span class="dv">2</span> <span class="ot">&lt;-</span> <span class="dv">4</span>,</span>
<span id="cb98-5"><a href="#cb98-5" tabindex="-1"></a>                      <span class="st">&quot;FDP&quot;</span>       <span class="ot">=</span>  <span class="dv">3</span> <span class="ot">&lt;-</span> <span class="dv">5</span>,</span>
<span id="cb98-6"><a href="#cb98-6" tabindex="-1"></a>                      <span class="st">&quot;Grüne&quot;</span>     <span class="ot">=</span>  <span class="dv">4</span> <span class="ot">&lt;-</span> <span class="dv">6</span>,</span>
<span id="cb98-7"><a href="#cb98-7" tabindex="-1"></a>                      <span class="st">&quot;Linke&quot;</span>     <span class="ot">=</span>  <span class="dv">5</span> <span class="ot">&lt;-</span> <span class="dv">7</span>,</span>
<span id="cb98-8"><a href="#cb98-8" tabindex="-1"></a>                      <span class="st">&quot;NPD&quot;</span>       <span class="ot">=</span>  <span class="dv">6</span> <span class="ot">&lt;-</span> <span class="dv">206</span>,</span>
<span id="cb98-9"><a href="#cb98-9" tabindex="-1"></a>                      <span class="st">&quot;Piraten&quot;</span>   <span class="ot">=</span>  <span class="dv">7</span> <span class="ot">&lt;-</span> <span class="dv">215</span>,</span>
<span id="cb98-10"><a href="#cb98-10" tabindex="-1"></a>                      <span class="st">&quot;AfD&quot;</span>       <span class="ot">=</span>  <span class="dv">8</span> <span class="ot">&lt;-</span> <span class="dv">322</span>,</span>
<span id="cb98-11"><a href="#cb98-11" tabindex="-1"></a>                      <span class="st">&quot;Other&quot;</span>     <span class="ot">=</span> <span class="dv">10</span> <span class="ot">&lt;-</span> <span class="dv">801</span>,</span>
<span id="cb98-12"><a href="#cb98-12" tabindex="-1"></a>                      <span class="st">&quot;No Vote&quot;</span>   <span class="ot">=</span> <span class="dv">90</span> <span class="ot">&lt;-</span> <span class="dv">900</span>,</span>
<span id="cb98-13"><a href="#cb98-13" tabindex="-1"></a>                      <span class="st">&quot;WN&quot;</span>        <span class="ot">=</span> <span class="dv">98</span> <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">98</span>,</span>
<span id="cb98-14"><a href="#cb98-14" tabindex="-1"></a>                      <span class="st">&quot;KA&quot;</span>        <span class="ot">=</span> <span class="dv">99</span> <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">99</span></span>
<span id="cb98-15"><a href="#cb98-15" tabindex="-1"></a>                  )</span>
<span id="cb98-16"><a href="#cb98-16" tabindex="-1"></a>  list.vote <span class="ot">&lt;-</span> <span class="fu">recode</span>(<span class="fu">as.item</span>(list.vote),</span>
<span id="cb98-17"><a href="#cb98-17" tabindex="-1"></a>                      <span class="st">&quot;CDU/CSU&quot;</span>   <span class="ot">=</span>  <span class="dv">1</span> <span class="ot">&lt;-</span> <span class="dv">1</span>,</span>
<span id="cb98-18"><a href="#cb98-18" tabindex="-1"></a>                      <span class="st">&quot;SPD&quot;</span>       <span class="ot">=</span>  <span class="dv">2</span> <span class="ot">&lt;-</span> <span class="dv">4</span>,</span>
<span id="cb98-19"><a href="#cb98-19" tabindex="-1"></a>                      <span class="st">&quot;FDP&quot;</span>       <span class="ot">=</span>  <span class="dv">3</span> <span class="ot">&lt;-</span> <span class="dv">5</span>,</span>
<span id="cb98-20"><a href="#cb98-20" tabindex="-1"></a>                      <span class="st">&quot;Grüne&quot;</span>     <span class="ot">=</span>  <span class="dv">4</span> <span class="ot">&lt;-</span> <span class="dv">6</span>,</span>
<span id="cb98-21"><a href="#cb98-21" tabindex="-1"></a>                      <span class="st">&quot;Linke&quot;</span>     <span class="ot">=</span>  <span class="dv">5</span> <span class="ot">&lt;-</span> <span class="dv">7</span>,</span>
<span id="cb98-22"><a href="#cb98-22" tabindex="-1"></a>                      <span class="st">&quot;NPD&quot;</span>       <span class="ot">=</span>  <span class="dv">6</span> <span class="ot">&lt;-</span> <span class="dv">206</span>,</span>
<span id="cb98-23"><a href="#cb98-23" tabindex="-1"></a>                      <span class="st">&quot;Piraten&quot;</span>   <span class="ot">=</span>  <span class="dv">7</span> <span class="ot">&lt;-</span> <span class="dv">215</span>,</span>
<span id="cb98-24"><a href="#cb98-24" tabindex="-1"></a>                      <span class="st">&quot;AfD&quot;</span>       <span class="ot">=</span>  <span class="dv">8</span> <span class="ot">&lt;-</span> <span class="dv">322</span>,</span>
<span id="cb98-25"><a href="#cb98-25" tabindex="-1"></a>                      <span class="st">&quot;Other&quot;</span>     <span class="ot">=</span> <span class="dv">10</span> <span class="ot">&lt;-</span> <span class="dv">801</span>,</span>
<span id="cb98-26"><a href="#cb98-26" tabindex="-1"></a>                      <span class="st">&quot;No Vote&quot;</span>   <span class="ot">=</span> <span class="dv">90</span> <span class="ot">&lt;-</span> <span class="dv">900</span>,</span>
<span id="cb98-27"><a href="#cb98-27" tabindex="-1"></a>                      <span class="st">&quot;WN&quot;</span>        <span class="ot">=</span> <span class="dv">98</span> <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">98</span>,</span>
<span id="cb98-28"><a href="#cb98-28" tabindex="-1"></a>                      <span class="st">&quot;KA&quot;</span>        <span class="ot">=</span> <span class="dv">99</span> <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">99</span></span>
<span id="cb98-29"><a href="#cb98-29" tabindex="-1"></a>                  )</span>
<span id="cb98-30"><a href="#cb98-30" tabindex="-1"></a>  </span>
<span id="cb98-31"><a href="#cb98-31" tabindex="-1"></a>   <span class="fu">missing.values</span>(candidate.vote) <span class="ot">&lt;-</span> <span class="dv">98</span><span class="sc">:</span><span class="dv">99</span></span>
<span id="cb98-32"><a href="#cb98-32" tabindex="-1"></a>   <span class="fu">missing.values</span>(list.vote) <span class="ot">&lt;-</span> <span class="dv">98</span><span class="sc">:</span><span class="dv">99</span></span>
<span id="cb98-33"><a href="#cb98-33" tabindex="-1"></a>   <span class="fu">measurement</span>(candidate.vote) <span class="ot">&lt;-</span> <span class="st">&quot;nominal&quot;</span></span>
<span id="cb98-34"><a href="#cb98-34" tabindex="-1"></a>   <span class="fu">measurement</span>(list.vote) <span class="ot">&lt;-</span> <span class="st">&quot;nominal&quot;</span></span>
<span id="cb98-35"><a href="#cb98-35" tabindex="-1"></a>})</span></code></pre></div>
<pre><code>Warning in recode(as.item(candidate.vote), `CDU/CSU` = 1 &lt;- 1, SPD = 2 &lt;- 4, :
recoding created 18 NAs</code></pre>
<pre><code>Warning in recode(as.item(list.vote), `CDU/CSU` = 1 &lt;- 1, SPD = 2 &lt;- 4, :
recoding created 19 NAs</code></pre>
<p>Finally, we can get a cross-tabulation of list votes and the
East-West factor and a cross tabulation of candidate votes against list
votes:</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="sc">~</span>list.vote<span class="sc">+</span>east.west,<span class="at">data=</span>gles2013work)</span></code></pre></div>
<pre><code>         east.west
list.vote East West
  CDU/CSU  440  714
  SPD      268  554
  FDP       32   87
  Grüne     70  226
  Linke    227  101
  NPD       11    6
  Piraten   14   34
  AfD       27   63
  Other      6   21
  No Vote  197  318</code></pre>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" tabindex="-1"></a><span class="fu">xtabs</span>(<span class="sc">~</span>list.vote<span class="sc">+</span>candidate.vote,<span class="at">data=</span>gles2013work)</span></code></pre></div>
<pre><code>         candidate.vote
list.vote CDU/CSU  SPD  FDP Grüne Linke  NPD Piraten  AfD Other No Vote
  CDU/CSU    1060   29   20     3    12    0       2    0     2       0
  SPD          44  700    1    39    14    1       2    1     1       0
  FDP          67   13   33     1     0    0       2    0     0       0
  Grüne        32  102    4   141     7    0       5    3     0       0
  Linke        10   45    2    15   245    2       2    2     1       0
  NPD           0    2    0     0     1   12       0    0     1       0
  Piraten       3    3    1     8     5    0      25    1     0       0
  AfD          20    7    2     2     5    2       5   43     2       0
  Other         5    4    0     3     1    1       0    1    11       0
  No Vote       0    0    0     0     0    0       0    0     0     515</code></pre>
</div>
</div>
<div class="footnotes footnotes-end-of-document">
<hr />
<ol>
<li id="fn1"><p>Those familiar with British politics will realise that
this is a simplification of the menu of available choices that voters in
England typically face in an election of the House of Commons.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>Of course, substantially it does not make sense at all
to form averages etc. of voting choices, so “do not try this at home”.
This example is merely to demonstrate codebooks and the setting of
scale-levels.<a href="#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p>The <a href="https://www.gesis.org/gles/about-gles">German Longitudinal
Election Study</a> is funded by the German National Science Foundation
(DFG) and carried out outin close cooperation with the <a href="https://www.dgfw.info/">DGfW</a>, German Society for Electoral
Studies. Principal investigators are Hans Rattinger (University of
Mannheim, until 2014), Sigrid Roßteutscher (University of Frankfurt),
Rüdiger Schmitt-Beck (University of Mannheim), Harald Schoen (Mannheim
Centre for European Social Research, from 2015), Bernhard Weßels (Social
Science Research Center Berlin), and Christof Wolf (GESIS – Leibniz
Institute for the Social Sciences, since 2012). Neither the funding
organisation nor the principal investigators bear any responsibility for
the example code shown here.<a href="#fnref3" class="footnote-back">↩︎</a></p></li>
</ol>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
